const t = require('tap')
const influence = require('..')
const data = require('./data')

t.test('should work on a finished game', t => {
    let result = influence.areaMap(data.finished)

    t.deepEqual(result, [ 
        [ -1, -1, -1, -1, -1, -1, 1, 1, 1, 1, -1, -1, -1, -1, -1, -1, -1, 1, 1 ],
        [ -1, -1, -1, -1, -1, 1, 1, 1, 1, 1, -1, -1, -1, -1, -1, -1, 1, 1, 1 ],
        [ -1, -1, -1, -1, -1, 1, 1, 1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, 1 ],
        [ -1, -1, -1, -1, -1, -1, 1, 1, 1, -1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ],
        [ -1, -1, -1, -1, -1, -1, -1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1 ],
        [ -1, -1, -1, -1, -1, -1, -1, 1, 0, -1, -1, 1, -1, -1, 0, 1, 1, 1, 1 ],
        [ -1, -1, -1, -1, -1, 1, 1, 1, 1, 1, 1, 1, 1, -1, -1, -1, 1, 1, 1 ],
        [ -1, -1, -1, 1, 1, 1, 1, -1, -1, 1, 0, 1, -1, 0, 1, -1, -1, -1, 1 ],
        [ -1, -1, -1, -1, 1, 1, 1, 0, -1, 1, -1, -1, -1, -1, -1, 1, 1, 1, 1 ],
        [ -1, -1, -1, 1, 1, -1, -1, -1, -1, 1, 1, 1, -1, -1, -1, -1, 1, -1, -1 ],
        [ -1, -1, -1, -1, 1, 1, 1, -1, -1, -1, 1, -1, -1, -1, -1, 1, 1, -1, -1 ],
        [ -1, 1, -1, 0, -1, -1, -1, -1, -1, -1, 1, -1, -1, -1, -1, 1, -1, -1, -1 ],
        [ 1, 1, 1, 1, -1, 1, 1, 1, -1, 1, 1, 1, -1, 0, -1, 1, -1, -1, 0 ],
        [ 0, 1, -1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, -1, 1, 1, -1, 1 ],
        [ 0, 0, -1, 1, 0, 0, 1, 1, -1, -1, 0, 1, -1, 1, -1, 1, -1, -1, -1 ],
        [ 0, 0, 1, 0, 1, 0, 1, 1, 1, -1, -1, 1, -1, -1, 1, -1, -1, -1, -1 ],
        [ 0, 0, 0, 0, 1, 1, 1, 1, -1, -1, -1, -1, 1, 1, 1, 1, -1, -1, -1 ],
        [ 0, 0, 1, 1, -1, 1, 1, -1, -1, -1, -1, 1, 1, 1, 1, 1, 1, -1, 1 ],
        [ 0, 0, 0, 1, -1, -1, -1, -1, -1, -1, -1, -1, 1, 1, 1, 1, 1, 1, 1 ]
    ])

    t.end()
})

t.test('should work on an unfinished game', t => {
    let result = influence.areaMap(data.unfinished)

    t.deepEqual(result, [
        [ 0, -1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
        [ 1, -1, -1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, 0, 0 ],
        [ -1, -1, -1, -1, 1, 1, 0, 1, 0, 1, 1, 0, -1, 0, -1, 0, -1, 1, 0 ],
        [ -1, -1, -1, -1, -1, -1, -1, 1, 0, -1, 0, 0, 0, 0, 0, -1, 1, 0, 0 ],
        [ -1, -1, -1, -1, 1, 1, 1, -1, -1, 0, 0, -1, 0, 0, -1, 1, 1, 0, 0 ],
        [ -1, -1, -1, -1, 0, 0, 0, -1, 0, 0, -1, 0, 0, 0, -1, 1, 0, 1, 0 ],
        [ -1, -1, 1, -1, 1, 1, 1, -1, 0, 1, 1, -1, 0, 0, 1, 1, -1, 0, 0 ],
        [ 0, 1, 0, -1, 0, -1, 1, -1, 0, 1, -1, 1, 0, 0, 0, 0, -1, 0, 1 ],
        [ 0, 0, 0, -1, 0, -1, 1, 1, 0, 1, -1, -1, 0, 0, 0, 1, 1, -1, 0 ],
        [ 0, 0, 1, 1, 1, -1, -1, 1, 0, 0, 1, 0, -1, -1, 1, 1, -1, -1, -1 ],
        [ 0, -1, -1, -1, 1, 0, 0, 1, 0, 1, 0, 0, -1, 1, 1, 1, 1, -1, -1 ],
        [ 0, -1, 1, 1, 1, 1, 0, -1, 1, 0, 0, 0, -1, 1, 1, 1, 1, -1, -1 ],
        [ 0, 0, 0, 0, 0, -1, 0, -1, -1, 0, 0, 0, -1, 1, 1, 1, 1, -1, -1 ],
        [ 0, -1, -1, 0, -1, 0, 0, 0, 0, 0, 0, 0, -1, -1, 1, 1, -1, -1, -1 ],
        [ 0, 0, 1, -1, 0, 0, 0, 0, 0, 0, 0, 0, -1, 1, -1, -1, 1, 1, -1 ],
        [ 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, -1, 0, 1, 0, 1, 0, 0, 0 ],
        [ 0, 0, 0, 0, 0, 0, 1, 0, -1, 0, 0, -1, 1, 0, 0, 1, 0, 1, 0 ],
        [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, 1, 1, 0, 0, 0, 0, 0, 0 ],
        [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ]
    ])

    t.end()
})
